webpackJsonp([1],{159:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a="SELECTEDDAYS",o="SELECTTIEME"},209:function(e,t,n){function a(e){n(469)}var o=n(26)(n(228),n(492),a,"data-v-1824bc78",null);e.exports=o.exports},218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),o=(n.n(a),n(97)),i=n(482),s=n.n(i),r=n(220),l=n(243),c=n(467),u=(n.n(c),n(468)),d=(n.n(u),n(223));o.a.use(l.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:r.a,template:"<App/>",store:d.a,components:{App:s.a}})},220:function(e,t,n){"use strict";var a=n(97),o=n(503),i=n(484),s=n.n(i);a.a.use(o.a),t.a=new o.a({routes:[{path:"/",name:"infoTab",component:s.a}]})},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"changeSelectedDays",function(){return o}),n.d(t,"changeSelectDaysTime",function(){return i});var a=n(159),o=function(e,t){(0,e.commit)(a.a,t)},i=function(e,t){(0,e.commit)(a.b,t)}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getSelectedDays",function(){return a}),n.d(t,"getSelectedTime",function(){return o});var a=function(e){return e.selectedDays},o=function(e){return e.selectedTime}},223:function(e,t,n){"use strict";var a=n(97),o=n(105),i=n(224),s=n(222),r=n(221);a.a.use(o.b),t.a=new o.b.Store({state:i.a,mutations:i.b,getters:s,actions:r,strict:!0})},224:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return l});var a,o=n(241),i=n.n(o),s=n(159),r={selectedDays:[],selectedTime:""},l=(a={},i()(a,s.a,function(e,t){console.log(t),e.selectedDays=t}),i()(a,s.b,function(e,t){e.selectedTime=t}),a)},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}}},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(107),o=n.n(a),i=n(164),s=n.n(i),r=n(162),l=n.n(r),c=n(207),u=n.n(c),d=n(485),f=n.n(d),p=n(105);t.default={name:"app",components:{MobileSelectTime:f.a},created:function(){var e=this;return l()(s.a.mark(function t(){var n,a,o,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{n=new Date,a=new u.a(window.navigator.userAgent),e.isMobileDevice=null!=a.mobile(),o=n.getDay(),i=[],i.push(o),i.push(o+1>6?0:o+1),e.changeSelectedDays(i),e.changeSelectDaysTime("")}catch(e){alert(e)}case 1:case"end":return t.stop()}},t,e)}))()},data:function(){return{isMobileDevice:!1,weekDaysOptions:[{label:"星期日",value:0},{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6}],startTimeOptions:[{text:"整天",value:""},{text:"中午十二點前",value:{from:0,to:12}},{text:"中午至下午六點",value:{from:12,to:18}},{text:"晚上六點後",value:{from:18,to:24}}]}},methods:o()({},n.i(p.a)(["changeSelectedDays","changeSelectDaysTime"]),{showSelectTime:function(){this.$refs.dateSelector.show()}})}},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(161),o=n.n(a),i=n(163),s=n.n(i),r=n(511),l=(n.n(r),n(97)),c=n(209),u=n.n(c);l.a.use(r,{load:{key:"AIzaSyBW6jkW1QIMpjw5SUIytKmuQ40emkWLgM8",v:"3"}}),t.default={props:["badmintonInfos","center"],components:{BadTable:u.a},data:function(){return{zoom:15,selectedBadmintonInfos:[],isCurrenctLocationOpen:!0}},methods:{getLocations:function(){var e=this.badmintonInfos.map(function(e){return e.location});return[].concat(s()(new o.a(e)))},handleOk:function(){this.$refs.modal.hide()},showModal:function(e){var t=e.name;this.selectedBadmintonInfos=this.badmintonInfos.filter(function(e){return e.location.name===t}),this.$refs.modal.show()},mapRclicked:function(e){this.center.lat=e.latLng.lat(),this.center.lng=e.latLng.lng(),this.$emit("update",this.center)}}}},228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(161),o=n.n(a),i=n(163),s=n.n(i);t.default={props:["badmintonInfos"],data:function(){return{sortBy:null,sortDesc:!1,badmintonFields:{location:{label:"地點",sortable:!0},distance:{label:"距離(KM)",sortable:!0},weekDay:{label:"禮拜幾",sortable:!0},startTime:{label:"開始時間",sortable:!0},endTime:{label:"結束時間",sortable:!0},payInfo:{label:"金額",sortable:!0},contactName:{label:"聯絡人",sortable:!0},contactPhone:{label:"電話",sortable:!0},line:{label:"Line",sortable:!0}}}},methods:{getLocations:function(){var e=this.badmintonInfos.map(function(e){return e.location});return[].concat(s()(new o.a(e)))}}}},229:function(e,t,n){"use strict";function a(e,t,n,a){var i=o(a-t),s=o(n-e),r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o(t))*Math.cos(o(a))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=6371*l;return Math.round(10*c)/10}function o(e){return e*Math.PI/180}Object.defineProperty(t,"__esModule",{value:!0});var i=n(164),s=n.n(i),r=n(242),l=n.n(r),c=n(160),u=n.n(c),d=n(162),f=n.n(d),p=n(107),m=n.n(p),v=n(486),b=n.n(v),h=n(483),y=n.n(h),_=n(209),g=n.n(_),D=n(207),x=n.n(D),k=n(105);t.default={name:"app",components:{PulseLoader:b.a,BadMap:y.a,BadTable:g.a},computed:m()({},n.i(k.c)(["getSelectedDays","getSelectedTime"]),{selectedDays:{get:function(){return this.getSelectedDays},set:function(e){this.changeSelectedDays(e),this.setFilteredBadmintonInfos()}},selectedTime:{get:function(){return""},set:function(e){this.changeSelectDaysTime(e),this.setFilteredBadmintonInfos()}}}),created:function(){var e=this;return f()(s.a.mark(function t(){var n,a,o,i,r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new x.a(window.navigator.userAgent),e.isMobileDevice=null!=n.mobile(),t.next=5,u.a.all([fetch("https://qatbadmap.herokuapp.com/api/locationinfolist"),fetch("https://qatbadmap.herokuapp.com/api/badmintoninfolist")]);case 5:return a=t.sent,t.next=8,u.a.all(a.map(function(e){return e.json()}));case 8:o=t.sent,i=l()(o,2),r=i[0],c=i[1],e.filteredBadmintonInfos=e.badmintonInfos=c.map(function(e){return e.location=r.find(function(t){var n=t.name;return e.location===n}),e}),e.loading=!1,"geolocation"in navigator&&(navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,a=n.latitude,o=n.longitude;e.currentLocation={lat:a,lng:o}}),e.locationUpdate(e.currentLocation)),e.setFilteredBadmintonInfos(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),alert(t.t0);case 21:case"end":return t.stop()}},t,e,[[0,18]])}))()},data:function(){return{currentLocation:{lat:25.079613,lng:121.556082},loading:!0,todayWeekday:1,badmintonInfos:[],filteredBadmintonInfos:[],startTimeOptions:[{text:"整天",value:""},{text:"中午十二點前",value:{from:0,to:12}},{text:"中午至下午六點",value:{from:12,to:18}},{text:"晚上六點後",value:{from:18,to:24}}],weekDaysOptions:[{label:"星期日",value:0},{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6}],isMobileDevice:!1}},methods:m()({},n.i(k.a)(["changeSelectedDays","changeSelectDaysTime"]),{setFilteredBadmintonInfos:function(){var e=this;this.filteredBadmintonInfos=this.badmintonInfos.filter(function(t){var n=t.weekDayInt,a=t.startHour,o=-1!==e.selectedDays.indexOf(n),i=!e.selectedTime||a>=e.selectedTime.from&&a<e.selectedTime.to;return o&&i})},locationUpdate:function(e){var t=this;this.badmintonInfos.forEach(function(e){e.distance=a(t.currentLocation.lng,t.currentLocation.lat,e.location.position.lng,e.location.position.lat)}),this.setFilteredBadmintonInfos()}})}},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(107),o=n.n(a),i=n(105);t.default={props:["weekDaysOptions","startTimeOptions"],components:{},data:function(){return{zoom:15}},computed:{selectedDays:{get:function(){return this.$store.state.selectedDays},set:function(e){this.changeSelectedDays(e)}},selectedTime:{get:function(){return this.$store.state.selectedTime},set:function(e){this.changeSelectDaysTime(e)}}},methods:o()({},n.i(i.a)(["changeSelectedDays","changeSelectDaysTime"]),{handleOk:function(){this.$refs.modal.hide()},showModal:function(){this.$refs.modal.show()}})}},467:function(e,t){},468:function(e,t){},469:function(e,t){},470:function(e,t){},471:function(e,t){},472:function(e,t){},473:function(e,t){},474:function(e,t){},475:function(e,t){},482:function(e,t,n){function a(e){n(472)}var o=n(26)(n(226),n(495),a,null,null);e.exports=o.exports},483:function(e,t,n){function a(e){n(471)}var o=n(26)(n(227),n(494),a,"data-v-373e93d2",null);e.exports=o.exports},484:function(e,t,n){function a(e){n(475)}var o=n(26)(n(229),n(501),a,"data-v-8cdfba72",null);e.exports=o.exports},485:function(e,t,n){var a=n(26)(n(230),n(496),null,null,null);e.exports=a.exports},486:function(e,t,n){function a(e){n(473)}var o=n(26)(n(225),n(499),a,null,null);e.exports=o.exports},487:function(e,t,n){var a=n(26)(n(231),n(502),null,null,null);e.exports=a.exports},488:function(e,t,n){var a=n(26)(n(232),n(497),null,null,null);e.exports=a.exports},489:function(e,t,n){function a(e){n(470)}var o=n(26)(n(233),n(493),a,null,null);e.exports=o.exports},490:function(e,t,n){var a=n(26)(n(234),n(498),null,null,null);e.exports=a.exports},491:function(e,t,n){function a(e){n(474)}var o=n(26)(n(235),n(500),a,null,null);e.exports=o.exports},492:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-table",{attrs:{striped:"",hover:"",items:e.badmintonInfos,fields:e.badmintonFields,"sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"location",fn:function(t){return[e._v(e._s(t.value.name))]}},{key:"distance",fn:function(t){return[e._v(e._s(t.value))]}},{key:"weekDay",fn:function(t){return[e._v(e._s(t.value))]}},{key:"startTime",fn:function(t){return[e._v(e._s(t.value))]}},{key:"endTime",fn:function(t){return[e._v(e._s(t.value))]}},{key:"payInfo",fn:function(t){return[e._v(e._s(t.value))]}},{key:"contactName",fn:function(t){return[e._v(e._s(t.value))]}},{key:"contactPhone",fn:function(t){return[e._v(e._s(t.value))]}},{key:"line",fn:function(t){return[e._v(e._s(t.value))]}}])})},staticRenderFns:[]}},493:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-map-container"},[n("div",{ref:"vue-map",staticClass:"vue-map"}),e._v(" "),n("div",{staticClass:"vue-map-hidden"},[e._t("default")],2),e._v(" "),e._t("visible")],2)},staticRenderFns:[]}},494:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("gmap-map",{staticClass:"gmap",attrs:{center:e.center,zoom:e.zoom},on:{rightclick:e.mapRclicked}},[n("gmap-cluster",e._l(e.getLocations(),function(t,a){return n("gmap-marker",{key:a,attrs:{position:t.position,label:t.name,clickable:!0},on:{click:function(n){e.showModal(t)}}})})),e._v(" "),n("gmap-marker",{attrs:{position:e.center,label:"現在選擇的位置"}})],1),e._v(" "),n("b-modal",{ref:"modal",attrs:{title:"Location","ok-only":"",size:"lg"},on:{ok:e.handleOk}},[n("bad-table",{attrs:{badmintonInfos:e.selectedBadmintonInfos}})],1)],1)},staticRenderFns:[]}},495:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",{class:{mobileheader:e.isMobileDevice}},[0==e.isMobileDevice?n("span",[e._v("Badminton map - 羽球地圖")]):e._e(),e._v(" "),e.isMobileDevice?n("b-navbar",{staticStyle:{"z-index":"300"},attrs:{type:"dark",variant:"info"}},[e._v("\n      Badminton map - 羽球地圖\n      "),n("b-nav-toggle",{attrs:{target:"nav_collapse"}}),e._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-nav",{attrs:{"is-nav-bar":""}},[n("b-nav-form",[n("b-button",{attrs:{size:"md"},on:{click:e.showSelectTime}},[e._v("Filter Select")])],1)],1)],1)],1):e._e()],1),e._v(" "),n("main",[n("b-modal",{ref:"dateSelector",attrs:{title:"日期","ok-only":"",size:"sm"}},[n("mobile-select-time",{attrs:{weekDaysOptions:e.weekDaysOptions,startTimeOptions:e.startTimeOptions}})],1),e._v(" "),n("router-view")],1)])},staticRenderFns:[]}},496:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-controls-stacked",attrs:{role:"group",size:"sm"}},[e._l(e.weekDaysOptions,function(t,a){return n("b-form-checkbox",{key:a,attrs:{value:t.value},model:{value:e.selectedDays,callback:function(t){e.selectedDays=t},expression:"selectedDays"}},[e._v(e._s(t.label))])}),e._v(" "),n("b-form-select",{attrs:{options:e.startTimeOptions},model:{value:e.selectedTime,callback:function(t){e.selectedTime=t},expression:"selectedTime"}})],2)},staticRenderFns:[]}},497:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"flyaway"},[e._t("default",[n("div",{domProps:{innerHTML:e._s(e.content)}})])],2)])},staticRenderFns:[]}},498:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",[n("span",{domProps:{textContent:e._s(e.label)}}),e._v(" "),n("input",{ref:"input",class:e.className,attrs:{type:"text",placeholder:e.placeholder}})])},staticRenderFns:[]}},499:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"v-spinner"},[n("div",{staticClass:"v-pulse v-pulse1",style:[e.spinnerStyle,e.spinnerDelay1]}),n("div",{staticClass:"v-pulse v-pulse2",style:[e.spinnerStyle,e.spinnerDelay2]}),n("div",{staticClass:"v-pulse v-pulse3",style:[e.spinnerStyle,e.spinnerDelay3]})])},staticRenderFns:[]}},500:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-street-view-pano-container"},[n("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),e._v(" "),e._t("default")],2)},staticRenderFns:[]}},501:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-12",attrs:{id:"app"}},[n("pulse-loader",{staticStyle:{"margin-top":"50px"},attrs:{loading:e.loading}}),e._v(" "),e.loading?e._e():n("div",[0==e.isMobileDevice?n("b-form",{staticStyle:{"margin-bottom":".5em"},attrs:{inline:""}},[e._l(e.weekDaysOptions,function(t,a){return n("b-form-checkbox",{key:a,attrs:{value:t.value},model:{value:e.selectedDays,callback:function(t){e.selectedDays=t},expression:"selectedDays"}},[e._v(e._s(t.label))])}),e._v(" "),n("b-form-select",{attrs:{options:e.startTimeOptions},model:{value:e.selectedTime,callback:function(t){e.selectedTime=t},expression:"selectedTime"}})],2):e._e(),e._v(" "),0==e.isMobileDevice?n("b-tabs",{attrs:{small:""}},[n("b-tab",{attrs:{title:"General map",active:""}},[n("bad-map",{staticClass:"gmap",attrs:{badmintonInfos:e.filteredBadmintonInfos,center:e.currentLocation},on:{update:e.locationUpdate}})],1),e._v(" "),n("b-tab",{attrs:{title:"List Location Info"}},[n("bad-table",{attrs:{badmintonInfos:e.filteredBadmintonInfos}})],1)],1):e._e(),e._v(" "),e.isMobileDevice?n("b-tabs",{attrs:{small:""}},[n("b-tab",{attrs:{title:"General map"}},[n("bad-map",{staticClass:"gmap",attrs:{badmintonInfos:e.filteredBadmintonInfos,center:e.currentLocation}})],1),e._v(" "),n("b-tab",{attrs:{title:"List Location Info",active:""}},[n("bad-table",{attrs:{badmintonInfos:e.filteredBadmintonInfos}})],1)],1):e._e()],1)],1)},staticRenderFns:[]}},502:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{ref:"input",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value}})},staticRenderFns:[]}},557:function(e,t,n){n(158),n(219),e.exports=n(218)}},[557]);
//# sourceMappingURL=app.0d838a7494f3df11310b.js.map