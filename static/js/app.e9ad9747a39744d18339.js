webpackJsonp([1],{173:function(t,e,n){function a(t){n(420)}var o=n(30)(n(181),n(441),a,"data-v-1824bc78",null);t.exports=o.exports},175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(130),o=(n.n(a),n(128)),i=n(432),s=n.n(i),r=n(177),l=n(236),c=n(418),u=(n.n(c),n(419));n.n(u);o.a.use(l.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:r.a,template:"<App/>",components:{App:s.a}})},177:function(t,e,n){"use strict";var a=n(128),o=n(451),i=n(434),s=n.n(i);a.a.use(o.a),e.a=new o.a({routes:[{path:"/",name:"infoTab",component:s.a}]})},178:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}}},179:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},180:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(131),o=n.n(a),i=n(133),s=n.n(i),r=n(459),l=(n.n(r),n(128)),c=n(173),u=n.n(c);l.a.use(r,{load:{key:"AIzaSyBW6jkW1QIMpjw5SUIytKmuQ40emkWLgM8",v:"3"}}),e.default={props:["badmintonInfos","center"],components:{BadTable:u.a},data:function(){return{zoom:15,selectedBadmintonInfos:[],isCurrenctLocationOpen:!0}},methods:{getLocations:function(){var t=this.badmintonInfos.map(function(t){return t.location});return[].concat(s()(new o.a(t)))},handleOk:function(){this.$refs.modal.hide()},showModal:function(t){var e=t.name;this.selectedBadmintonInfos=this.badmintonInfos.filter(function(t){return t.location.name===e}),this.$refs.modal.show()},mapRclicked:function(t){this.center.lat=t.latLng.lat(),this.center.lng=t.latLng.lng(),this.$emit("update",this.center)}}}},181:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(131),o=n.n(a),i=n(133),s=n.n(i);e.default={props:["badmintonInfos"],data:function(){return{sortBy:null,sortDesc:!1,badmintonFields:{location:{label:"地點",sortable:!0},distance:{label:"距離(KM)",sortable:!0},weekDay:{label:"禮拜幾",sortable:!0},startTime:{label:"開始時間",sortable:!0},endTime:{label:"結束時間",sortable:!0},payInfo:{label:"金額",sortable:!0},contactName:{label:"聯絡人",sortable:!0},contactPhone:{label:"電話",sortable:!0},line:{label:"Line",sortable:!0}}}},methods:{getLocations:function(){var t=this.badmintonInfos.map(function(t){return t.location});return[].concat(s()(new o.a(t)))}}}},182:function(t,e,n){"use strict";function a(t,e,n,a){var i=o(a-e),s=o(n-t),r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o(e))*Math.cos(o(a))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=6371*l;return Math.round(10*c)/10}function o(t){return t*Math.PI/180}Object.defineProperty(e,"__esModule",{value:!0});var i=n(234),s=n.n(i),r=n(91),l=n.n(r),c=n(43),u=n.n(c),d=n(194),f=n.n(d),p=n(435),m=n.n(p),v=n(433),b=n.n(v),h=n(173),y=n.n(h);e.default={name:"app",components:{PulseLoader:m.a,BadMap:b.a,BadTable:y.a},created:function(){var t=this;return f()(s.a.mark(function e(){var n,o,i,r,c,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.all([fetch("https://qatbadmap.herokuapp.com/api/locationinfolist"),fetch("https://qatbadmap.herokuapp.com/api/badmintoninfolist")]);case 3:return n=e.sent,e.next=6,u.a.all(n.map(function(t){return t.json()}));case 6:o=e.sent,i=l()(o,2),r=i[0],c=i[1],t.filteredBadmintonInfos=t.badmintonInfos=c.map(function(t){return t.location=r.find(function(e){var n=e.name;return t.location===n}),t}),d=new Date,t.loading=!1,t.todayWeekday=d.getDay(),t.selectedDays.push(t.todayWeekday),t.selectedDays.push(t.todayWeekday+1>6?0:t.todayWeekday+1),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var n=e.coords,o=n.latitude,i=n.longitude;t.currentLocation={lat:o,lng:i},t.badmintonInfos.forEach(function(t){var e=t.location.position,n=e.lng,s=e.lat;t.distance=a(i,o,n,s)})}),t.setFilteredBadmintonInfos(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),alert(e.t0);case 23:case"end":return e.stop()}},e,t,[[0,20]])}))()},data:function(){return{currentLocation:{lat:25.079613,lng:121.556082},loading:!0,todayWeekday:1,badmintonInfos:[],filteredBadmintonInfos:[],selectedDays:[],selectedTime:"",startTimeOptions:[{text:"整天",value:""},{text:"中午十二點前",value:{from:0,to:12}},{text:"中午至下午六點",value:{from:12,to:18}},{text:"晚上六點後",value:{from:18,to:24}}],weekDaysOptions:[{label:"星期日",value:0},{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6}]}},methods:{setFilteredBadmintonInfos:function(){var t=this;this.filteredBadmintonInfos=this.badmintonInfos.filter(function(e){var n=e.weekDayInt,a=e.startHour,o=-1!==t.selectedDays.indexOf(n),i=!t.selectedTime||a>=t.selectedTime.from&&a<t.selectedTime.to;return o&&i})},locationUpdate:function(t){var e=this;console.log("asdsd"),this.badmintonInfos.forEach(function(t){t.distance=a(e.currentLocation.lng,e.currentLocation.lat,t.location.position.lng,t.location.position.lat)}),this.setFilteredBadmintonInfos()}}}},418:function(t,e){},419:function(t,e){},420:function(t,e){},421:function(t,e){},422:function(t,e){},423:function(t,e){},424:function(t,e){},425:function(t,e){},426:function(t,e){},432:function(t,e,n){function a(t){n(423)}var o=n(30)(n(179),n(444),a,null,null);t.exports=o.exports},433:function(t,e,n){function a(t){n(422)}var o=n(30)(n(180),n(443),a,"data-v-373e93d2",null);t.exports=o.exports},434:function(t,e,n){function a(t){n(426)}var o=n(30)(n(182),n(449),a,"data-v-8cdfba72",null);t.exports=o.exports},435:function(t,e,n){function a(t){n(424)}var o=n(30)(n(178),n(447),a,null,null);t.exports=o.exports},436:function(t,e,n){var a=n(30)(n(183),n(450),null,null,null);t.exports=a.exports},437:function(t,e,n){var a=n(30)(n(184),n(445),null,null,null);t.exports=a.exports},438:function(t,e,n){function a(t){n(421)}var o=n(30)(n(185),n(442),a,null,null);t.exports=o.exports},439:function(t,e,n){var a=n(30)(n(186),n(446),null,null,null);t.exports=a.exports},440:function(t,e,n){function a(t){n(425)}var o=n(30)(n(187),n(448),a,null,null);t.exports=o.exports},441:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",{attrs:{striped:"",hover:"",items:t.badmintonInfos,fields:t.badmintonFields,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"location",fn:function(e){return[t._v(t._s(e.value.name))]}},{key:"distance",fn:function(e){return[t._v(t._s(e.value))]}},{key:"weekDay",fn:function(e){return[t._v(t._s(e.value))]}},{key:"startTime",fn:function(e){return[t._v(t._s(e.value))]}},{key:"endTime",fn:function(e){return[t._v(t._s(e.value))]}},{key:"payInfo",fn:function(e){return[t._v(t._s(e.value))]}},{key:"contactName",fn:function(e){return[t._v(t._s(e.value))]}},{key:"contactPhone",fn:function(e){return[t._v(t._s(e.value))]}},{key:"line",fn:function(e){return[t._v(t._s(e.value))]}}])})},staticRenderFns:[]}},442:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-map-container"},[n("div",{ref:"vue-map",staticClass:"vue-map"}),t._v(" "),n("div",{staticClass:"vue-map-hidden"},[t._t("default")],2),t._v(" "),t._t("visible")],2)},staticRenderFns:[]}},443:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("gmap-map",{staticClass:"gmap",attrs:{center:t.center,zoom:t.zoom},on:{rightclick:t.mapRclicked}},[n("gmap-cluster",t._l(t.getLocations(),function(e,a){return n("gmap-marker",{key:a,attrs:{position:e.position,label:e.name,clickable:!0},on:{click:function(n){t.showModal(e)}}})})),t._v(" "),n("gmap-marker",{attrs:{position:t.center,label:"現在選擇的位置"}})],1),t._v(" "),n("b-modal",{ref:"modal",attrs:{title:"Location","ok-only":"",size:"lg"},on:{ok:t.handleOk}},[n("bad-table",{attrs:{badmintonInfos:t.selectedBadmintonInfos}})],1)],1)},staticRenderFns:[]}},444:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),n("main",[n("router-view")],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("span",[t._v("Badminton map - 羽球地圖")])])}]}},445:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"flyaway"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2)])},staticRenderFns:[]}},446:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",[n("span",{domProps:{textContent:t._s(t.label)}}),t._v(" "),n("input",{ref:"input",class:t.className,attrs:{type:"text",placeholder:t.placeholder}})])},staticRenderFns:[]}},447:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[n("div",{staticClass:"v-pulse v-pulse1",style:[t.spinnerStyle,t.spinnerDelay1]}),n("div",{staticClass:"v-pulse v-pulse2",style:[t.spinnerStyle,t.spinnerDelay2]}),n("div",{staticClass:"v-pulse v-pulse3",style:[t.spinnerStyle,t.spinnerDelay3]})])},staticRenderFns:[]}},448:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-street-view-pano-container"},[n("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},449:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12",attrs:{id:"app"}},[n("pulse-loader",{staticStyle:{"margin-top":"50px"},attrs:{loading:t.loading}}),t._v(" "),t.loading?t._e():n("div",[n("b-form",{staticStyle:{"margin-bottom":".5em"},attrs:{inline:""}},[t._l(t.weekDaysOptions,function(e,a){return n("b-form-checkbox",{key:a,attrs:{value:e.value},on:{change:t.setFilteredBadmintonInfos},model:{value:t.selectedDays,callback:function(e){t.selectedDays=e},expression:"selectedDays"}},[t._v(t._s(e.label))])}),t._v(" "),n("b-form-select",{attrs:{options:t.startTimeOptions},on:{input:t.setFilteredBadmintonInfos},model:{value:t.selectedTime,callback:function(e){t.selectedTime=e},expression:"selectedTime"}})],2),t._v(" "),t.loading?t._e():n("b-tabs",{attrs:{small:""}},[n("b-tab",{attrs:{title:"General map",active:""}},[n("bad-map",{staticClass:"gmap",attrs:{badmintonInfos:t.filteredBadmintonInfos,center:t.currentLocation},on:{update:t.locationUpdate}})],1),t._v(" "),n("b-tab",{attrs:{title:"List Location Info"}},[n("bad-table",{attrs:{badmintonInfos:t.filteredBadmintonInfos}})],1)],1)],1)],1)},staticRenderFns:[]}},450:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{ref:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value}})},staticRenderFns:[]}},461:function(t,e,n){n(130),n(176),t.exports=n(175)}},[461]);
//# sourceMappingURL=app.e9ad9747a39744d18339.js.map